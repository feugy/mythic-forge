/*
  Copyright 2010,2011,2012 Damien Feugas
  
    This file is part of Mythic-Forge.

    Myth is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Myth is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser Public License for more details.

    You should have received a copy of the GNU Lesser Public License
    along with Mythic-Forge.  If not, see <http://www.gnu.org/licenses/>.
*/

/* Imports */
@import 'jquery-ui.css'
@import 'jquery-ui-numeric.css'
@import 'jquery-timepicker-addon.css'
@import 'constants' 
@import 'reset'
@import 'mixins'

// Global styles

:not(.ui-numeric) > input
:not(.adv-editor) > textarea
select
.ui-numeric
  border 1px solid borderColor
  border-radius radius
  padding 0.2em
  transition all 200ms

  &:focus
  &.focus
    border-color focusColor
    box-shadow 0 0 5px rgba(focusColor, 0.6)

// Menus
.menu
.tooltip
  position absolute
  background-color bgColor
  border 1px solid borderColor
  box-shadow 0 3px 5px shadowColor
  margin-top 2px
  border-radius radius
  padding 0.2em
  transition opacity 200ms
  opacity 0
  z-index -1

.menu > *
  hoverable()
  padding 0.5em 1em

.tooltip
  padding 0.5em
  background hoverColor

.tooltip *
  font-size fontSize*0.8
  padding 0.25em 0.5em

.tooltip ul
  margin-left 1em
  list-style square

.menu.open
.menu.toggleable 
.tooltip
  z-index 10
  opacity 1

.menu.toggleable li 
  font-size fontSize*0.8

  i
    font-style normal
    font-size fontSize*0.65
  .ui-icon
    margin 0 0.5em 0 -0.5em

// Button

.action-bars .ui-button 
.action-bar .ui-button 
  display: inline-block;
  margin-right 10px
  min-height 27px
  min-width 27px
  vertical-align bottom

.action-bar .separator
  display inline-block
  height 25px
  width 2px
  border 1px solid borderColor
  background hoverColor
  border-radius 5px
  box-shadow: 1px 1px 2px 1px hoverColor

.ui-button-icon-only .ui-button-text
  display none

// Icons
multiIcon(valid invalid cancel warning question help success failure login logout)

multiIcon(save remove open upload unbind rename remove-selection remove-folder restore, 1)

multiIcon(new-folder new-file add-param add-property new-item new-event new-player embody, 2)

multiIcon(map field item event rule turn-rule script player client-conf, 3)

multiIcon(world-edition world-moderation game-authoring admin game-dev, 4)

// Special icons that may be inside text
for name in question warning cancel
  .ui-dialog .ui-icon.{name}
    float left
    margin 0 1em 1em 0

.ui-button-text-icon-primary .ui-button-text
  padding-left 2.3em

.ui-widget-overlay 
  opacity 0.7

// Validators

:not(.ui-numeric) > input.validation-error
textarea.validation-error
.validation-error
  border-color errorColor

// JQuery ui dialogs

.ui-dialog 
  min-height 175px
  min-width 480px

  *
    font-size 14px

  .ui-dialog-content 
    min-height 150px
    min-width 450px
    line-height fontSize*1.5

    p
      margin-bottom 1em

// Main Layout
html
body
  height 100%

  > .loader
    margin-top 20%

.disclaimer
  background-image url('images/myth-logo-text.png')
  background-position 50% 15%
  background-repeat no-repeat
  background-size auto 150px
  width 100%
  height 100%
  text-align center

  h1
    padding 20% 0 1em
    font-size fontSize*3
    font-weight bold

  p, a
    font-size fontSize*1.5
    margin 0.5em 0

.dragged
  margin-top 1em
  z-index 10
  label
    padding-left 1em
  .map-item
    margin-top 1em
    transform scale(0.5, 0.5)

.loader
  height 16px
  background url('images/loader.gif')
  background-repeat no-repeat
  background-position center top

.layout 
.login-view
  display box
  box-orient vertical
  overflow hidden
  width 100%
  height 100%
  min-height 500px
  min-width 800px

  header
    box-sizing border-box
    padding 0 1em

    > div
      padding 0.5em 0
      height 30px
      border-bottom 1px solid lightgrey
      width 100%
      position relative

      > *
        display inline-block

      h1
        font-size fontSize*1.4
        font-weight bold
        position relative
        top 6px

      nav
        position absolute
        text-align center
        left 0px
        right 0px
        top 2px

        .ui-button
          width 37px
          height 37px

        .ui-button.active
          box-shadow: 0 0 5px 2px #B8E5F5
          background #FFFFFF

        .ui-icon
          position relative

      .connected
      .deployement
        position absolute
        right 0px
      
        i 
          display inline-block
          font-style normal
          font-weight bold

      .connected
        margin-right 100px
        top 14px

        i
          margin-right 0.5em

      .deployement 
        margin-right 200px
        top 12px
        visibility hidden
        
        i
          background url('images/round-loader.gif')
          height 16px
          width 16px
          margin-bottom -2px

      .logout
        position absolute
        right 0

  > .container
    box-flex 1
    display box

    > *
      display box
      box-flex 1

  footer
    box-sizing border-box

    > div
      position relative
      margin 0 1em
      padding 0.5em 0
      border-top 1px solid lightgrey

      > *
        display inline-block
        font-size fontSize*0.9

      .copyright
        position absolute
        top 0.5em
        right 0

// Common style for perspective layout

.loadable.selected
  box-shadow: 0 0 10px 5px #AAA
    
.name-choose-popup
  
  input.name
    display block
    width 350px
    margin 0.5em 1em

  .errors
    text-align center
    font-size fontSize*0.9
    color errorColor

  .loadable
  .lang-container
    margin-top 1em

  .loadable:not(:first-child)
    margin-left 0.3em

  .lang-container
    text-align center
  .lang-container > *
    text-align left

.perspective
  space = 1em
  // Perspective is an horizontal flex-box
  display box
  overflow hidden

  > *
    // Each child of the perspective is itself a vertical flex-box
    box-flex 1
    box-sizing border-box
    padding space space space 0

    // TODO a vÃ©rifier overflow hidden
    display box
    box-orient vertical    

    > *:first-child
      padding-bottom space

  > *:first-child
    padding-left space

  > .left
    box-flex 0

  > .right

    .ui-tabs 
      box-flex 1

    .ui-tabs.views
      display box
      box-orient vertical

      .ui-tabs-nav
        width 100%
        padding-top 2px
        box-sizing border-box

      .content.modified:before
        content '*'

      .ui-tabs-panel
        box-flex 1
        height 1px // Firefox bug: must have an height to overflow
        overflow auto
        position relative

      .ui-icon-close
        display inline-block
        cursor: pointer

      .ui-tabs-nav li a
        padding: 0.2em 0.5em
        typeIcons '.icon', 25, 0
        
  // views
  .view

    > h1
      font-weight 700
      border-bottom 1px solid borderColor
      margin-bottom 10px
      padding-bottom 10px
      width 100%

    > .errors
      border-radius radius
      background-color errorColor

      > *
        padding 0.5em 1em
      * 
        color white

    > .external-change
      border-radius radius

      > *
        padding 0.5em 1em
      * 
        color errorColor
        
    .images
      padding-top 0.5em

      label
        padding-top 0
        line-height 75px

      .images-container
        display inline

      .loadable
        display inline-block
        vertical-align middle

    > div
      margin-top 0.5em
      width 100%

      label
        display inline-block
        width 90px
        margin-right 1em
        padding-top 0.4em
        text-align right
        vertical-align top

      .properties
        margin-top 1em
        border 1px solid borderColor
        border-collapse collapse
        width 100%

        th 
          table-header()
          padding 0.5em 1em

        th:nth-child(1)
        th:nth-child(2)
          width 25%
          border-bottom 1px solid borderColor
          border-right 1px solid borderColor

        td
          vertical-align top
          padding 0.2em

        td > a
          height 18px
          width 18px

          .ui-icon
            top 1px
            left 1px

      :not(.adv-editor) textarea
        width 75%
        resize vertical

      input[type=text]
        min-width 50%


// Login styles
.login-view
  background-image url('images/myth-logo-text.png')
  background-position 50% 20%
  background-repeat no-repeat
  background-size auto 150px

  .container
    box-orient vertical
    box-pack center
    box-align center

  .content
    display inline-block
    box-flex 0
    border-radius 10px
    border 1px solid borderColor
    box-shadow 0 10px 15px shadowColor
    background-color rgba(white, 0.85)
    padding 30px 40px
    text-align center

    h1
      border-bottom 1px solid borderColor
      margin-bottom 20px
      padding-bottom 10px

    h1
    .separator
      font-size fontSize*1.2
      font-weight bold

    .separator
      margin 20px 0

    form
      width 400px
      padding 0 1em

      a.login
        margin-top 1em

      fieldset 
        padding 2px 0

        > *
          width 50%
          box-sizing border-box
          display inline-block

      label
        padding-right 10px
        text-align right

    .connect
      margin 0 1em
      font-weight bold
      text-decoration none

    .connect.twitter
      color white
        
    connect-button '.connect.google', 0
    connect-button '.connect.twitter', 2

input[type='range']
  vertical-align top
  margin-top  -2px

// Overridable imports
@import 'edition-perspective'
@import 'moderation-perspective'
@import 'authoring-perspective'
@import 'admin-perspective'
@import 'widget'