/*
  Copyright 2010,2011,2012 Damien Feugas
  
    This file is part of Mythic-Forge.

    Myth is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Myth is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser Public License for more details.

    You should have received a copy of the GNU Lesser Public License
    along with Mythic-Forge.  If not, see <http://www.gnu.org/licenses/>.
*/

@import 'constants'

// Common variable
imageDim = 75px
loadablePadding = 2px

a.ui-button:not(.ui-button-icon-only):not(.ui-button-text-icon-secondary):not(.ui-button-text-only)
  padding 1px

  > .ui-button-text
    padding-left 2.8em

// LoadableImage
.loadable
  display block
  position relative 
  width imageDim
  padding loadablePadding
  text-align center

  img 
    max-height imageDim
    max-width imageDim

  img:not([src])
    height 0
    
  p 
    display inline-block
    background-color black
    vertical-align middle
    color white
    padding-top padding =23px
    height imageDim - padding
    width imageDim
    margin 0

  > .ui-icon 
    background-color white
    position absolute
    cursor pointer  
    z-index 2
    top 3px

  .ui-icon-trash 
    right 3px

  .ui-icon-folder-open 
    right 19px
    text-indent 0px 
  
    input[type=file] 
      opacity 0
      margin 0
      cursor pointer
      position absolute
      right 0 

// spriteImage
.loadable.sprite
  border-radius radius 0 0 radius
  shift = ((imageDim * 1.3 - imageDim) / 2)px
  width imageDim*1.3
  transition all 250ms

  p
  img
    left shift

  .ui-icon-trash 
    right 3 + shift

  .ui-icon-folder-open 
    right 19 + shift

  .dimensions
    margin-top 3px
    font-size fontSize*0.8

    input
      width 25px
      text-align right

  .details
    z-index 1
    display none
    padding 0.5em
    position absolute
    border-radius 0 radius radius
    top 0
    left imageDim+shift*2
    background-color hoverColor
    text-align left

    table
      margin 1em 0
      border-collapse collapse
      border 1px solid borderColor
      background-color bgColor

      .number.property-widget
      .duration.property-widget
      .rank.property-widget
        width 60px

        input
          width 35px

      th
        table-header()
        border-bottom 1px solid borderColor
        border-right 1px solid borderColor

      th
      td
        padding 0.2em
        vertical-align middle

      td > *
        margin 0 1em 0 0

      td > a
        height 18px
        width 18px

        .ui-icon
          top 1px
          left 1px

.loadable.sprite.show
  background-color hoverColor

  .details
    display inherit

.loadable.sprite.validation-error

  > img[src]
    border 1px solid errorColor
  > .alt
    color errorColor

// property
.property-widget.validation-error
  border-color none
  
  > input[type=text]
  > input[type=number]
  > textarea
    border-color errorColor

// Carousel
.carousel 
  navDim = 16px

  .mask 
    overflow hidden
    display inline-block
    position relative 
    height imageDim
    width imageDim
  
  .container 
    position absolute

  .thumbnail 
    width imageDim
    height auto
    vertical-align middle

  .thumbnail[data-src='null']
    background-color black

  .previous
  .next 
    cursor pointer
    display inline-block
    text-indent -99999px
    overflow hidden
    width navDim
    height navDim
    border none
    vertical-align (imageDim/3)px
    background-color transparent
    background-image url('images/carousel.png') 

  .next 
    background-position 0 0

  .next.ui-button-disabled 
    cursor auto
    background-position -2*navDim 0

  .previous 
    background-position -1*navDim 0

  .previous.ui-button-disabled 
    cursor auto
    background-position -3*navDim 0

.map-widget 
  margin 10px
  font-size 0
  box-sizing border-box
  overflow hidden
  position relative
    
  .map-perspective
    perspective 600px
    position absolute
    display block
  
    > *:not(.menu)
      position absolute
    > .fields
      padding-left 0

    .hover
    .selection
      opacity 0.5

.map-item
  position absolute
  overflow hidden
  padding 0
  transform-origin 0 0

  > div
    transform-origin 0 0
  
// Search
.search
  position relative
  padding-right 30px
  z-index 5000

  .results
    position absolute
    background white
    padding 16px
    overflow auto
    min-width 200px
    box-shadow 0 3px 5px shadowColor
    z-index 1

  .nb-results
    font-size fontSize*0.9
    padding 3px 5px

  .error
    position absolute
    opacity 0
    transition all 500ms
    background errorColor
    color white
    border-radius 4px
    box-shadow 0 3px 5px shadowColor
    padding 0.5em 1em
    line-height 1.2em
    font-size fontSize*0.9

  input    
    padding-right 20px
    box-sizing border-box
    width 100%

  .ui-icon.ui-icon-search
    cursor pointer
    display inline-block
    margin-bottom -3px
    margin-left -25px

  .ui-icon.help
    position absolute
    right 0
    top 0
    cursor pointer

.search.invalid

  .error 
    opacity 1

// Type details
.type-details
  padding 0.5em 0 0.5em 1em
  imageDim = 40px

  img
    width imageDim
    height imageDim

  .carousel
  img
    vertical-align -1.2em
    margin-right 5px
    display inline-block

  .carousel
    .mask
    .thumbnail
      height imageDim
      width imageDim

    .previous
    .next 
      vertical-align (imageDim/3)px

.type-details.inactive
  inactive()

// Type tree
.type-tree
  
  dt 
    hoverable()
    typeIcons '> i',  25, 0 5px 0 0
    font-size 1.1em
    padding 5px 2px

  // open/close icons
  dt::before
    content ''
    display: inline-block
    background-image url(images/tree.png)
    background-repeat no-repeat
    height 18px 
    width 18px
    vertical-align middle
    margin-right -5px

  dt.open::before
    background-position -18px 0px

  dd > *:not(dd)
    hoverable()

  dd > dd
    margin-left 1em

  dd > dt::before
    margin-right 0px

// Toggleable
.toggleable 
  position absolute
  z-index 5000
  top 0
  left 0
  width auto

// Instance list and details
.instance-list
  border 1px solid borderColor
  border-radius radius
  margin 0
  max-height 200px
  overflow-x hidden
  overflow-y auto

  .empty
    color inactiveColor
    cursor auto
    padding 0.5em

  > li:last-child
    border-radius 0 0 radius radius
  
  > li:first-child
    border-radius radius radius 0 0

  > li:nth-child(2n)
    background-color altColor

  > li
    cursor pointer
    padding 2px
    position relative

    .unbind
      position absolute
      right 10px
      top 10px
      padding 0
      height 18px
      width 18px

.instance-list.drop-hover li
  background-color hoverColor

.instance-list.drop-possible
  border 2px solid dropColor

.instance-details
  size = 30px
  white-space nowrap
  
  .map-item
    display inline-block
    margin-right 5px
    vertical-align middle
    position relative
    height size !important
    width size !important

    div
      transform-origin 0 0
      transform scale(0.4, 0.4)

  span
    vertical-align middle
    display inline-block

    > *
      font-style normal
      font-size fontSize*0.75

.instance-details.no-image span
  padding 0.5em 1em

.adv-editor 
  overflow hidden
  
  .ace_editor
    width 100%
    height 100%

  .prompt
    border-radius 0 0 5px 5px
    padding 5px
    font-size 0 !important
    background rgba(black, 0.5)
    position absolute
    right 25px
    top -150px
    transition all 250ms
    z-index 1

    .replace
      margin-top 2px
      display none

    div > *
      display inline-block

    .icon
      background-color rgba(white, 0.5)
      padding 2px
      border-radius 3px
      margin 0 0 0 3px
      line-height 0 !important
      padding 3px
      vertical-align -4px

    .icon:focus
      background-color rgba(white, 0.7)
      box-shadow: 0 0 5px rgba(117, 185, 240, 0.6);

    .icon:hover
      background-color rgba(white, 0.8)

    span
      width 120px
      text-align right
      color white
      padding-right 1em

    input
      width 180px
      min-width 0 !important

  .prompt.shown
    top 0

  .prompt.and-replace .replace
    display block