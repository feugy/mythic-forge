/*
  Copyright 2010,2011,2012 Damien Feugas
  
    This file is part of Mythic-Forge.

    Myth is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Myth is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser Public License for more details.

    You should have received a copy of the GNU Lesser Public License
    along with Mythic-Forge.  If not, see <http://www.gnu.org/licenses/>.
*/

// Common variable
imageDim = 75px
loadablePadding = 2px

// LoadableImage
.loadable
  display block
  position relative 
  width imageDim
  padding loadablePadding
  text-align center

  img 
    width imageDim
    height imageDim

  img:not([src])
    height 0
    
  p 
    display inline-block
    background-color black
    vertical-align middle
    color white
    padding-top padding =23px
    height imageDim - padding
    width imageDim
    margin 0

  > .ui-icon 
    background-color white
    position absolute
    cursor pointer  
    z-index 2
    top 3px

  .ui-icon-trash 
    right 3px

  .ui-icon-folder-open 
    right 19px
    text-indent 0px 
  
    input[type=file] 
      opacity 0
      margin 0
      cursor pointer
      position absolute
      right 0 

// spriteImage
.loadable.sprite
  border-radius radius 0 0 radius
  shift = ((imageDim * 1.3 - imageDim) / 2)px
  width imageDim*1.3
  transition all 250ms

  p
  img
    left shift

  .ui-icon-trash 
    right 3 + shift

  .ui-icon-folder-open 
    right 19 + shift

  .dimensions
    margin-top 3px
    font-size fontSize*0.8

    input
      width 25px
      text-align right

  .details
    z-index 1
    display none
    padding 0.5em
    position absolute
    border-radius 0 radius radius
    top 0
    left imageDim+shift*2
    background-color hoverColor
    text-align left

    table
      margin 1em 0
      border-collapse collapse
      border 1px solid borderColor
      background-color bgColor

      .number.property-widget
      .duration.property-widget
      .rank.property-widget
        width 60px

        input
          width 35px

      th
        table-header()
        border-bottom 1px solid borderColor
        border-right 1px solid borderColor

      th
      td
        padding 0.2em
        vertical-align middle

      td > *
        margin 0 1em 0 0

      td > a
        height 18px
        width 18px

        .ui-icon
          top 1px
          left 1px

.loadable.sprite.show
  background-color hoverColor

  .details
    display inherit

.loadable.sprite.validation-error

  > img[src]
    border 1px solid errorColor
  > .alt
    color errorColor

// property
.property-widget.validation-error
  border-color none
  
  > input[type=text]
  > input[type=number]
  > textarea
    border-color errorColor

// Carousel
.carousel 
  navDim = 16px

  .mask 
    overflow hidden
    display inline-block
    position relative 
    height imageDim
    width imageDim
  
  .container 
    position absolute

  .thumbnail 
    height imageDim
    width imageDim

  .thumbnail[data-src='null']
    background-color black

  .previous
  .next 
    cursor pointer
    display inline-block
    text-indent -99999px
    overflow hidden
    width navDim
    height navDim
    border none
    vertical-align (imageDim/3)px
    background-color transparent
    background-image url('images/carousel.png') 

  .next 
    background-position 0 0

  .next.ui-button-disabled 
    cursor auto
    background-position -2*navDim 0

  .previous 
    background-position -1*navDim 0

  .previous.ui-button-disabled 
    cursor auto
    background-position -3*navDim 0

.map-widget 
  margin 10px
  font-size 0
  box-sizing border-box
  overflow hidden
  position relative
    
  .perspective
    perspective 600px
    position absolute
    display block
  
    > *
      transform rotateX(4deg)
      position absolute
    > .fields
      padding-left 0

    .hover
    .selection
      opacity 0.5


// Search
.search
  position relative

  .results
    position absolute
    background white
    padding 16px
    overflow auto
    width 200px
    box-shadow 0 3px 5px shadowColor

  .nb-results
    font-size fontSize*0.9
    padding 3px 5px

  .error
    position absolute
    opacity 0
    transition all 500ms
    background errorColor
    color white
    border-radius 4px
    box-shadow 0 3px 5px shadowColor
    padding 0.5em 1em
    line-height 1.2em
    font-size fontSize*0.9

  input    
    padding-right 20px
    width 75%

  .ui-icon.ui-icon-search
    cursor pointer
    display inline-block
    margin-bottom -3px
    margin-left -25px

  .ui-icon.help
    float right

.search.invalid

  .error 
    opacity 1

// Type details
.type-details
  padding 0.5em 0 0.5em 1em
  imageDim = 40px

  img
    width imageDim
    height imageDim

  .carousel
  img
    vertical-align -1.2em
    margin-right 5px
    display inline-block

  .carousel
    .mask
    .thumbnail
      height imageDim
      width imageDim

    .previous
    .next 
      vertical-align (imageDim/3)px

.type-details.inactive
  inactive()

// Type tree
.type-tree
  
  dt 
    hoverable()
    typeIcons '> i',  25, 0 5px 0 0
    font-size 1.1em
    padding 5px 2px

  // open/close icons
  dt::before
    content ''
    display: inline-block
    background-image url(images/tree.png)
    background-repeat no-repeat
    height 18px 
    width 18px
    vertical-align middle
    margin-right -5px

  dt.open::before
    background-position -18px 0px

  dd > *:not(dd)
    hoverable()

  dd > dd
    margin-left 1em

  dd > dt::before
    margin-right 0px
