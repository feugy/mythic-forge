# TODO

- Hyperion
  - Search in Events, Items and Players
  - cache evinction on inutility and size
  - test images for field types and event types
  - Rule engine
    - secured rules > mock save() and remove() methods from instances, collection and update() from classes
    - transactional behaviour
  - Security
    - register users from Facebook

- Rheia
  - moderation perspective
    - Search
      - input query with help and validation (use regexp by default with leading/trailing .* unless found ^ or $)
      - display result and navigates
    - Maps
      - items animations (with z-ordering)
  - display connected count in top bar
  - edition perspective
    - Maps
      - diamond map widget
      - square map widget
  - authoring perspective
    - multiple file search & replace
    - single file search & replace

- Atlas
  - created and automate tests

# Done

- Hyperion
  - bugs
    - remove item type property does not update existing items
  - ImageService to upload and associate images to types
  - remove all images when removing a type
  - Field type CRUD
  - Map CRUD
  - Destroys map items and fields when destroying map
  - Field CRUD
  - Item CRUD for administrators
  - disabled turn-rules/rules
  - turn-rules ordering rank
  - Event type CRUD
  - Event CRUD with link to from, creation and update dates
  - Players 
    - CRUD with AdminService
    - password management and protection for manually provided accounts
    - kick player: disconnect socket when disconnecting
  - Map items and their types
    - CRUD in database (Items, Fields, Maps)
    - Dynamic properties
      - declaration and enforcement 
      - type-checking
      - links resolution at server side
    - Modifications propagation
  - Search service for types
    - (item, event, field, map, rule, turn-rule) search by id (val is string)
    - (item, event, field, map, rule, turn-rule) search 'val' (as string/regex) in name (locale is parametrized)
    - (item, event, field) search 'val' (as string/regex) in name (locale is parametrized)
    - (item, event) search property 'p' existence
    - (item, event) search property 'p' default value 'val' (anything)
    - (item) search quantifiable 'val' (boolean)
    - (rule) search 'val' (as string/regexp) in category
    - (turn-rule) search 'val' (as number) in rank
    - (rule, turn-rule) search 'val' (as string/regexp) in body
  - Search service for instances
    - (item, event, player) search by id (val is string)
    - (item, event) search property 'p' existence
    - (item, event) search property 'p' containing value 'val' (val is anything)
    - (item, event) search property 'p.sp' where linked object has a property 'sp'
    - (item, event) search property 'p.sp' where linked object contains property 'sp' with value 'val' (val is anything)
    - (item, event) search type by id (val is string)
    - (item, event) search type where property 'p' exists
    - (item, event) search type where property 'p' has value 'val' (val is anything)
    - (item) search map by id (val is string)
    - (item) search map exists
    - (item) search map where property 'p' has value 'val' (val is anything)
    - (item) search by quantity (val is number)
    - (player) search by characters existence
    - (player) search by characters id (val is string)
    - (player) search by characters where property 'p' exists
    - (player) search by characters where property 'p' has value 'val' (val is anything)
    - (player) search by preference content
    - (player) search by email, firstName, lastName
  - Authoring service and FSItem
    - get FSItem
    - save FSItem
    - remove FSItem
    - rename/move FSItem
    - service layer
    - web layer
    - commit FSItem on save
    - get FSItem history
    - get FSItem version
    - keep history when moving FSItem
    - list deleted files
  - Authoring Service and game deployment
    - compile stylus, coffee and optimize js and css
    - move to production path and create unic url for resources
    - compact git history and create version
    - revert to previous version
    - list existing versions and current
    - allow/block non-administrator login
    - return current version and deployed version
    - restrict game dev to administors
    - serve production version with cache and gzip
  - Security
    - kick users after inactivity
    - register users from Google
    - register users from Twitter
    - register user manually
    - enforce user existence and rights at socket.io handshake
    - disable security for tests
    - re-authent user after disconnection
    - manual user logout 
    - session expiration
    - restrict rheia access to administrators only
    - test password management of manually registered players
  - Rule engine 
    - file system storage and compilation
    - runtime resolution and execution at server side
    - runtime resolution at client side
    - items creation and removal
    - items updates
    - turn rules
  - Web layer
    - map items CRUD invokation
    - rule engine invokation
    - rules retrieval
    - map items modification propagation
    - secured websocket

- Rheia
  - bugs
    - spaces inside tab names 
    - rule with category appears in turnRules in search results
    - browser do not retain passwords
  - perspective loader
  - login page
  - logout button
  - error reporting on network failure, kick and deployement in progress cases
  - reconnection management, page reloading management
  - authoring perspective
    - reload when changing game client version
    - error handling while saving/moving/removing files (during deployement)
    - Perspective
      - file tab widget
      - create new file/folder
      - upload in selected
      - rename selected
      - delete selected
    - File Explorer
      - items loading
      - items navigation and selection
      - update when item added or removed
      - contextual menu
    - File View
      - action bar (save, delete)
      - editor widget
      - loading/save content
      - external modification/removal notification
      - displays images
    - History
      - display file's history
      - revert to file version
  - edition perspective
    - contextual menus in search and explorer
    - Maps
      - map name and validation
      - map kind (square, diamond, hexa)
      - hexagonal map widget
      - drag'n drop from explorer
      - remove selection
      - display/hide grid
      - zoom in, zoom out
      - selection with Ctrl
      - selection with Shift
      - multiple affectation
      - zoom, toggle markers and toggle grid commands
    - Search
      - input query with help and validation
      - display result and navigates
    - auto-adjust panel top when tabs are added/removed and when window is resized
    - ItemType
      - static fields and description image
      - properties
      - instance images
      - sprites
      - validation
      - quantity management
    - EventType
    - FieldType
      - static fields and description image
      - instance images
      - image carousel in explorer
    - Rule
      - categories in explorer
      - static fields (name, category) with validation
      - rule body
      - rule CRUD
      - rule special behaviour when renaming
    - TurnRule
  - administration perspective
    - create and restore game client versions
    - display externally triggered deployements
    - game client version list 
    - deploy, commit and rollback
    - error handling on AdminService
  - moderation perspective
    - Maps
      - maps list, switch current map
      - displayal with fields and items
      - map controls
      - map moves by drag' drop
      - items rendering update
      - item click
      - item affectation and moves by drag'n drop
      - multiple item menu
    - Items
      - CRUD
      - external updates and removal
      - quantity management
      - display and edit dynamic properties, and update rendering when changes detected
      - displays, edits and navigates to linked
      - restrict drop operations on object/array properties
      - display tooltip on object/array properties
    - Events 
      - CRUD
      - sort event by update date in properties
      - display tooltip on object/array properties
    - Players 
      - CRUD (email, firstName, lastName, prefs, characters, isAdmin, lastConnection)
      - providers and password management
      - kick

- Atlas
  - map displayal
  - rules resolution
  - application of map items modifications 
  - create a new player and display its map
  - bot mode
  - transitions
    - image sprite specification (size, location)
    - transition duration
    - transition chain
    - image cache

# Consequent changes
  - no more distinction between Items and Actors
  - no more event on actors
  - no more link between rules and actors
  - hexagonal maps
  - event-kind properties
  - date-kind properties
  - connect with Google, Twitter
  - FSItem history management, with revert to previous and restore
  - Drop from Item/Event/Player tabs
  - Sprite management for animations and transition
  - Rules in CoffeeScript
  - Isomorphic rules: can partially be executed on client to increase reactivity
  - WebSocket everywhere: increase speed